Index: app/src/main/java/com/example/tinnhn/ui/main/FriendsFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tinnhn.ui.main;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\n//import com.example.tinnhn.AddActivity;\r\n//import com.example.tinnhn.DatabaseHelper;\r\nimport com.example.tinnhn.R;\r\nimport com.google.android.material.tabs.TabLayout;\r\n//import com.example.tinnhn.TinNhan;\r\n\r\n\r\npublic class FriendsFragment extends Fragment {\r\n\r\n    private View mRoot;\r\n\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        mRoot = inflater.inflate(R.layout.fragment_friends, container, false);\r\n        BanBePagerAdapter sectionsPagerAdapter = new BanBePagerAdapter(getContext(), getChildFragmentManager());\r\n        ViewPager viewPager = mRoot.findViewById(R.id.view_pager);\r\n        viewPager.setAdapter(sectionsPagerAdapter);\r\n        final TabLayout tabs = mRoot.findViewById(R.id.tabs);\r\n        tabs.setupWithViewPager(viewPager);\r\n        return mRoot;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/tinnhn/ui/main/FriendsFragment.java	(revision d2021d6529c2345a3bdb802a88317b7934ab2409)
+++ app/src/main/java/com/example/tinnhn/ui/main/FriendsFragment.java	(date 1608086722023)
@@ -10,11 +10,8 @@
 import androidx.fragment.app.Fragment;
 import androidx.viewpager.widget.ViewPager;
 
-//import com.example.tinnhn.AddActivity;
-//import com.example.tinnhn.DatabaseHelper;
 import com.example.tinnhn.R;
 import com.google.android.material.tabs.TabLayout;
-//import com.example.tinnhn.TinNhan;
 
 
 public class FriendsFragment extends Fragment {
Index: app/src/main/java/com/example/tinnhn/ui/main/FriendChildFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tinnhn.ui.main;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport com.example.tinnhn.Friends;\r\nimport com.example.tinnhn.FriendsAdapter;\r\nimport com.example.tinnhn.FriendsRequest;\r\nimport com.example.tinnhn.FriendsRequestAdapter;\r\nimport com.example.tinnhn.HoiThoaiActivity;\r\nimport com.example.tinnhn.Information_friend_acitivity;\r\nimport com.example.tinnhn.MainActivity;\r\nimport com.example.tinnhn.R;\r\nimport com.example.tinnhn.TrangThai;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport static android.content.Context.MODE_PRIVATE;\r\n\r\npublic class FriendChildFragment extends Fragment {\r\n\r\n    private View mRoot;\r\n    private static DatabaseReference mDatabase;\r\n    SharedPreferences sharedPreferences;\r\n    SharedPreferences.Editor editor;\r\n    public static ArrayList<Friends> arrFriends;\r\n    public static ArrayList<Friends> arrFriends_check;\r\n    public static ArrayList<Friends> arrFriends_check1;\r\n    public static FriendsAdapter friendsAdapter;\r\n    static ArrayList<FriendsRequest> arrFriendsRequests;\r\n    static ArrayList<FriendsRequest> arrFriendsRequests_check;\r\n    static String EmailUser;\r\n    static ListView list_friends_request_child;\r\n    static FriendsRequestAdapter friendsRequestAdapter;\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        mRoot = inflater.inflate(R.layout.fragment_friends_child, container, false);\r\n        mDatabase = FirebaseDatabase.getInstance().getReference();\r\n        sharedPreferences = getContext().getSharedPreferences(\"GhiNhoDangNhap\", MODE_PRIVATE);\r\n        editor = sharedPreferences.edit();\r\n\r\n        ListView list_friends_child = mRoot.findViewById(R.id.list_friends_child);\r\n        arrFriends = new ArrayList<>();\r\n        arrFriends_check = new ArrayList<>();\r\n        arrFriends_check1 = new ArrayList<>();\r\n        friendsAdapter = new FriendsAdapter(getContext(), R.layout.list_friends_item, arrFriends);\r\n        list_friends_child.setAdapter(friendsAdapter);\r\n        EmailUser = sharedPreferences.getString(\"tenTaiKhoan\", \"\");\r\n        mDatabase = FirebaseDatabase.getInstance().getReference();\r\n\r\n        GoiDanhSachBanBe();\r\n        list_friends_child.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {\r\n                Intent intent = new Intent(getActivity(), Information_friend_acitivity.class);\r\n                intent.putExtra(\"EmailNguoiGui\", arrFriends.get(i).email);\r\n                intent.putExtra(\"TenNguoiGui\", arrFriends.get(i).tenTaiKhoan);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\n        list_friends_request_child = mRoot.findViewById(R.id.list_friends_request_child);\r\n        arrFriendsRequests = new ArrayList<>();\r\n        arrFriendsRequests_check = new ArrayList<>();\r\n        friendsRequestAdapter = new FriendsRequestAdapter(getContext(), R.layout.list_loi_moi_item, arrFriendsRequests);\r\n        list_friends_request_child.setAdapter(friendsRequestAdapter);\r\n\r\n        if (arrFriendsRequests.size() <= 0) {\r\n            list_friends_request_child.setVisibility(View.GONE);\r\n        }\r\n\r\n        mDatabase.child(\"LoiMoiKetBan\").addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                FriendsRequest friendsRequest = snapshot.getValue(FriendsRequest.class);\r\n\r\n                if (friendsRequest.EmailUser.equals(EmailUser)) {\r\n                    String key = snapshot.getKey();\r\n                    arrFriendsRequests.add(new FriendsRequest(key, friendsRequest.idTaiKhoan, friendsRequest.tenTaiKhoan, friendsRequest.email,\r\n                            friendsRequest.diaChi, friendsRequest.hinhDaiDien, friendsRequest.EmailUser));\r\n                }\r\n                if (arrFriendsRequests.size() <= 0) {\r\n                    list_friends_request_child.setVisibility(View.GONE);\r\n                } else {\r\n                    list_friends_request_child.setVisibility(View.VISIBLE);\r\n                }\r\n\r\n                friendsRequestAdapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n                friendsRequestAdapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n        mDatabase.child(\"TrangThai\").addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                TrangThai trangThai123 = snapshot.getValue(TrangThai.class);\r\n                for(int i = 0 ; i < arrFriends.size(); i++){\r\n                    if(arrFriends.get(i).email.equals(trangThai123.Email_user)){\r\n                        arrFriends.clear();\r\n                        friendsAdapter.notifyDataSetChanged();\r\n                        GoiDanhSachBanBe();\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n        return mRoot;\r\n    }\r\n\r\n    public static void GoiLoiMoiKetBan() {\r\n        mDatabase = FirebaseDatabase.getInstance().getReference();\r\n        arrFriendsRequests.clear();\r\n        mDatabase.child(\"LoiMoiKetBan\").addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                FriendsRequest friendsRequest = snapshot.getValue(FriendsRequest.class);\r\n\r\n                    if (friendsRequest.EmailUser.equals(EmailUser)) {\r\n                        String key = snapshot.getKey();\r\n                        arrFriendsRequests.add(new FriendsRequest(key, friendsRequest.idTaiKhoan, friendsRequest.tenTaiKhoan, friendsRequest.email,\r\n                                friendsRequest.diaChi, friendsRequest.hinhDaiDien, friendsRequest.EmailUser));\r\n                    }\r\n                    if (arrFriendsRequests.size() <= 0) {\r\n                        list_friends_request_child.setVisibility(View.GONE);\r\n                    } else {\r\n                        list_friends_request_child.setVisibility(View.VISIBLE);\r\n                    }\r\n\r\n                friendsRequestAdapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    public static void GoiDanhSachBanBe() {\r\n        arrFriends.clear();\r\n        friendsAdapter.notifyDataSetChanged();\r\n        mDatabase = FirebaseDatabase.getInstance().getReference();\r\n        mDatabase.child(\"BanBe\").addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                Friends friends = snapshot.getValue(Friends.class);\r\n//                arrFriends_check.clear();\r\n//                arrFriends_check.add(friends);\r\n//                for(int i = 0 ; i < arrFriends_check.size(); i++){\r\n                if (friends.EmailUser.equals(EmailUser)) {\r\n                    String key_Friend = snapshot.getKey();\r\n                    arrFriends.add(new Friends(key_Friend, friends.idTaiKhoan, friends.tenTaiKhoan, friends.email,\r\n                            friends.diaChi, friends.hinhDaiDien, friends.EmailUser));\r\n                }\r\n                String key_Friend_1 = snapshot.getKey();\r\n                arrFriends_check1.add(new Friends(key_Friend_1, friends.idTaiKhoan, friends.tenTaiKhoan, friends.email,\r\n                        friends.diaChi, friends.hinhDaiDien, friends.EmailUser));\r\n//                }\r\n                friendsAdapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n                Friends friends = snapshot.getValue(Friends.class);\r\n                if(friends.EmailUser.equals(EmailUser)){\r\n                    GoiDanhSachBanBe();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/tinnhn/ui/main/FriendChildFragment.java	(revision d2021d6529c2345a3bdb802a88317b7934ab2409)
+++ app/src/main/java/com/example/tinnhn/ui/main/FriendChildFragment.java	(date 1608086722016)
@@ -98,7 +98,6 @@
             @Override
             public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
                 FriendsRequest friendsRequest = snapshot.getValue(FriendsRequest.class);
-
                 if (friendsRequest.EmailUser.equals(EmailUser)) {
                     String key = snapshot.getKey();
                     arrFriendsRequests.add(new FriendsRequest(key, friendsRequest.idTaiKhoan, friendsRequest.tenTaiKhoan, friendsRequest.email,
@@ -142,8 +141,8 @@
             @Override
             public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
                 TrangThai trangThai123 = snapshot.getValue(TrangThai.class);
-                for(int i = 0 ; i < arrFriends.size(); i++){
-                    if(arrFriends.get(i).email.equals(trangThai123.Email_user)){
+                for (int i = 0; i < arrFriends.size(); i++) {
+                    if (arrFriends.get(i).email.equals(trangThai123.Email_user)) {
                         arrFriends.clear();
                         friendsAdapter.notifyDataSetChanged();
                         GoiDanhSachBanBe();
@@ -177,17 +176,15 @@
             public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
                 FriendsRequest friendsRequest = snapshot.getValue(FriendsRequest.class);
 
-                    if (friendsRequest.EmailUser.equals(EmailUser)) {
-                        String key = snapshot.getKey();
-                        arrFriendsRequests.add(new FriendsRequest(key, friendsRequest.idTaiKhoan, friendsRequest.tenTaiKhoan, friendsRequest.email,
-                                friendsRequest.diaChi, friendsRequest.hinhDaiDien, friendsRequest.EmailUser));
-                    }
-                    if (arrFriendsRequests.size() <= 0) {
-                        list_friends_request_child.setVisibility(View.GONE);
-                    } else {
-                        list_friends_request_child.setVisibility(View.VISIBLE);
-                    }
-
+                if (friendsRequest.EmailUser.equals(EmailUser)) {
+                    String key = snapshot.getKey();
+                    arrFriendsRequests.add(new FriendsRequest(key, friendsRequest.idTaiKhoan, friendsRequest.tenTaiKhoan, friendsRequest.email, friendsRequest.diaChi, friendsRequest.hinhDaiDien, friendsRequest.EmailUser));
+                }
+                if (arrFriendsRequests.size() <= 0) {
+                    list_friends_request_child.setVisibility(View.GONE);
+                } else {
+                    list_friends_request_child.setVisibility(View.VISIBLE);
+                }
                 friendsRequestAdapter.notifyDataSetChanged();
             }
 
@@ -243,7 +240,7 @@
             @Override
             public void onChildRemoved(@NonNull DataSnapshot snapshot) {
                 Friends friends = snapshot.getValue(Friends.class);
-                if(friends.EmailUser.equals(EmailUser)){
+                if (friends.EmailUser.equals(EmailUser)) {
                     GoiDanhSachBanBe();
                 }
             }
Index: .idea/dictionaries/PQT123.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/dictionaries/PQT123.xml	(date 1608036445272)
+++ .idea/dictionaries/PQT123.xml	(date 1608036445272)
@@ -0,0 +1,3 @@
+<component name="ProjectDictionaryState">
+  <dictionary name="PQT123" />
+</component>
\ No newline at end of file
Index: app/src/main/java/com/example/tinnhn/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tinnhn;\r\n\r\nimport android.Manifest;\r\nimport android.app.AlertDialog;\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.content.SharedPreferences;\r\nimport android.graphics.PorterDuff;\r\nimport android.net.ConnectivityManager;\r\nimport android.net.wifi.WifiManager;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\n\r\nimport com.example.tinnhn.Call.Actions;\r\nimport com.example.tinnhn.Call.BaseActivity;\r\nimport com.example.tinnhn.Call.SinchServices;\r\nimport com.example.tinnhn.taikhoan.LoginActivity;\r\nimport com.example.tinnhn.taikhoan.MyReceiver;\r\nimport com.google.android.material.tabs.TabLayout;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.annotation.RequiresApi;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.view.Menu;\r\nimport android.view.MenuInflater;\r\nimport android.view.MenuItem;\r\nimport android.view.WindowManager;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.tinnhn.ui.main.SectionsPagerAdapter;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport static com.example.tinnhn.taikhoan.LoginActivity.kTraMang;\r\n\r\npublic class MainActivity extends BaseActivity {\r\n    String TAG = \"MainActivity\";\r\n    // lấy url hình từ mail người dùng\r\n    BroadcastReceiver broadcastReceiver = new MyReceiver();\r\n    SharedPreferences sharedPreferences;\r\n    SharedPreferences.Editor editor;\r\n    String emailsv;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\r\n        filter.addAction(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION);\r\n        filter.addAction(WifiManager.EXTRA_RESULTS_UPDATED);\r\n        this.registerReceiver(broadcastReceiver, filter);\r\n        sharedPreferences = getSharedPreferences(\"GhiNhoDangNhap\", MODE_PRIVATE);\r\n        editor = sharedPreferences.edit();\r\n        emailsv = sharedPreferences.getString(\"tenTaiKhoan\", \"\");\r\n//        Toast.makeText(this, emailsv, Toast.LENGTH_SHORT).show();\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\r\n            requestPermissions(new String[]{Manifest.permission.RECORD_AUDIO, Manifest.permission.CAMERA, Manifest.permission.ACCESS_NETWORK_STATE, Manifest.permission.READ_PHONE_STATE}, 100);\r\n        }\r\n\r\n        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n        SectionsPagerAdapter sectionsPagerAdapter = new SectionsPagerAdapter(this, getSupportFragmentManager());\r\n        ViewPager viewPager = findViewById(R.id.view_pager);\r\n        viewPager.setAdapter(sectionsPagerAdapter);\r\n        final TabLayout tabs = findViewById(R.id.tabs);\r\n        tabs.setupWithViewPager(viewPager);\r\n        tabs.getTabAt(0).setIcon(R.drawable.envelope);\r\n        tabs.getTabAt(1).setIcon(R.drawable.group);\r\n        tabs.getTabAt(2).setIcon(R.drawable.friend);\r\n        tabs.getTabAt(3).setIcon(R.drawable.ic_baseline_dashboard_24);\r\n        tabs.getTabAt(0).getIcon().setColorFilter(getResources().getColor(R.color.colorItemSelected), PorterDuff.Mode.SRC_IN);\r\n        tabs.getTabAt(1).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n        tabs.getTabAt(2).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n        tabs.getTabAt(3).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n\r\n        tabs.addOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {\r\n            @Override\r\n            public void onTabSelected(TabLayout.Tab tab) {\r\n                switch (tab.getPosition()) {\r\n                    case 0:\r\n                        tabs.getTabAt(0).getIcon().setColorFilter(getResources().getColor(R.color.colorItemSelected), PorterDuff.Mode.SRC_IN);\r\n                        tabs.getTabAt(1).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n                        tabs.getTabAt(2).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n                        tabs.getTabAt(3).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n                        break;\r\n                    case 1:\r\n                        tabs.getTabAt(1).getIcon().setColorFilter(getResources().getColor(R.color.colorItemSelected), PorterDuff.Mode.SRC_IN);\r\n                        tabs.getTabAt(0).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n                        tabs.getTabAt(2).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n                        tabs.getTabAt(3).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n                        break;\r\n                    case 2:\r\n                        tabs.getTabAt(2).getIcon().setColorFilter(getResources().getColor(R.color.colorItemSelected), PorterDuff.Mode.SRC_IN);\r\n                        tabs.getTabAt(1).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n                        tabs.getTabAt(0).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n                        tabs.getTabAt(3).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n                        break;\r\n                    case 3:\r\n                        tabs.getTabAt(3).getIcon().setColorFilter(getResources().getColor(R.color.colorItemSelected), PorterDuff.Mode.SRC_IN);\r\n                        tabs.getTabAt(1).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n                        tabs.getTabAt(0).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n                        tabs.getTabAt(2).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n                        break;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onTabUnselected(TabLayout.Tab tab) {\r\n//                chaydichvu();\r\n                tabs.getTabAt(2).getIcon().setColorFilter(getResources().getColor(R.color.colorItem), PorterDuff.Mode.SRC_IN);\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTabReselected(TabLayout.Tab tab) {\r\n            }\r\n        });\r\n        if (kTraMang == 0) {\r\n            android.app.AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);\r\n            builder.setMessage(\"No internet, check network and restart app\");\r\n            builder.setPositiveButton(\"OK\", new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialog, int which) {\r\n\r\n                }\r\n            });\r\n            builder.show();\r\n        }\r\n        else {\r\n            String trangthai = \"Active Now\";\r\n            HamTrangThai(trangthai);\r\n        }\r\n    }\r\n\r\n    private void actionOnService(Actions actions) {\r\n\r\n        Intent intent = new Intent(MainActivity.this, SinchServices.class);\r\n        intent.setAction(actions.name());\r\n        startService(intent);\r\n\r\n\r\n\r\n    }\r\n    @Override\r\n    public void onDestroy() {\r\n\r\n        String trangthai = \"Not Active\";\r\n        HamTrangThai(trangthai);\r\n        super.onDestroy();\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        actionOnService(Actions.START);\r\n        super.onPause();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n\r\n        super.onStop();\r\n    }\r\n\r\n    @Override\r\n    protected void onServiceDisconnected() {\r\n\r\n        super.onServiceDisconnected();\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        actionOnService(Actions.STOP);\r\n        super.onResume();\r\n    }\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        MenuInflater inflater = getMenuInflater();\r\n        inflater.inflate(R.menu.menu_mainlist, menu);\r\n\r\n        return true;\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.JELLY_BEAN)\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        // Handle item selection\r\n        switch (item.getItemId()) {\r\n            case R.id.menu_Dangxuat:\r\n                XoaGhiNhoDangNhap();\r\n\r\n                startActivity(new Intent(MainActivity.this, LoginActivity.class));\r\n                finish();\r\n                break;\r\n            case R.id.menu_Thoat:\r\n\r\n                break;\r\n            case R.id.menu_Xoa:\r\n\r\n                break;\r\n            default:\r\n                return super.onOptionsItemSelected(item);\r\n        }\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n\r\n    private void XoaGhiNhoDangNhap() {\r\n\r\n        SharedPreferences sharedPreferences;\r\n        SharedPreferences.Editor editor;\r\n        sharedPreferences = getSharedPreferences(\"GhiNhoDangNhap\", MODE_PRIVATE);\r\n        editor = sharedPreferences.edit();\r\n        editor.remove(\"tenTaiKhoan\");\r\n        editor.commit();\r\n    }\r\n    //dang xuat\r\n    public void HamTrangThai(String trangthai){\r\n        SharedPreferences sharedPreferences;\r\n        SharedPreferences.Editor editor;\r\n        sharedPreferences = getSharedPreferences(\"GhiNhoDangNhap\", MODE_PRIVATE);\r\n        editor = sharedPreferences.edit();\r\n        String EmailUser = sharedPreferences.getString(\"tenTaiKhoan\", \"\");\r\n\r\n        DatabaseReference mDatabase = FirebaseDatabase.getInstance().getReference();\r\n        mDatabase.child(\"TrangThai\").addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                TrangThai trangThai1 = snapshot.getValue(TrangThai.class);\r\n                if (trangThai1.Email_user.equals(EmailUser)) {\r\n                    String key = snapshot.getKey();\r\n                    mDatabase.child(\"TrangThai\").child(key).child(\"TrangThai\").setValue(trangthai);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/tinnhn/MainActivity.java	(revision d2021d6529c2345a3bdb802a88317b7934ab2409)
+++ app/src/main/java/com/example/tinnhn/MainActivity.java	(date 1608088482864)
@@ -44,7 +44,6 @@
 
 public class MainActivity extends BaseActivity {
     String TAG = "MainActivity";
-    // lấy url hình từ mail người dùng
     BroadcastReceiver broadcastReceiver = new MyReceiver();
     SharedPreferences sharedPreferences;
     SharedPreferences.Editor editor;
@@ -133,8 +132,7 @@
                 }
             });
             builder.show();
-        }
-        else {
+        } else {
             String trangthai = "Active Now";
             HamTrangThai(trangthai);
         }
@@ -147,11 +145,10 @@
         startService(intent);
 
 
-
     }
+
     @Override
     public void onDestroy() {
-
         String trangthai = "Not Active";
         HamTrangThai(trangthai);
         super.onDestroy();
@@ -180,6 +177,7 @@
         actionOnService(Actions.STOP);
         super.onResume();
     }
+
     @Override
     public boolean onCreateOptionsMenu(Menu menu) {
         MenuInflater inflater = getMenuInflater();
@@ -195,7 +193,6 @@
         switch (item.getItemId()) {
             case R.id.menu_Dangxuat:
                 XoaGhiNhoDangNhap();
-
                 startActivity(new Intent(MainActivity.this, LoginActivity.class));
                 finish();
                 break;
@@ -218,10 +215,14 @@
         sharedPreferences = getSharedPreferences("GhiNhoDangNhap", MODE_PRIVATE);
         editor = sharedPreferences.edit();
         editor.remove("tenTaiKhoan");
+        editor.remove("tenUser");
+        editor.remove("DiaChiUser");
+        editor.remove("urlHinhDaiDien");
         editor.commit();
     }
+
     //dang xuat
-    public void HamTrangThai(String trangthai){
+    public void HamTrangThai(String trangthai) {
         SharedPreferences sharedPreferences;
         SharedPreferences.Editor editor;
         sharedPreferences = getSharedPreferences("GhiNhoDangNhap", MODE_PRIVATE);
Index: app/src/main/java/com/example/tinnhn/taikhoan/LoginActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tinnhn.taikhoan;\r\n\r\nimport android.Manifest;\r\nimport android.app.AlertDialog;\r\nimport android.app.Dialog;\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.content.SharedPreferences;\r\nimport android.net.ConnectivityManager;\r\nimport android.net.wifi.WifiManager;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\nimport android.os.Handler;\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.view.View;\r\nimport android.view.WindowManager;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\n\r\nimport com.example.tinnhn.Call.Actions;\r\nimport com.example.tinnhn.Call.BaseActivity;\r\nimport com.example.tinnhn.Call.GroupHoiThoaiActivity;\r\nimport com.example.tinnhn.Call.SinchServices;\r\nimport com.example.tinnhn.MainActivity;\r\nimport com.example.tinnhn.R;\r\nimport com.example.tinnhn.TrangThai;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class LoginActivity extends BaseActivity {\r\n    public static int kiemTraDangNhap;\r\n    public static DBFirebase dbFirebase;\r\n    public static String tenUser = \"\";\r\n    public static String DiaChiUser = \"\";\r\n    public static String urlHinhDaiDien = \"\";\r\n    public static KiemTraMang kiemTraMang = new KiemTraMang();\r\n    public static int kTraMang;\r\n    EditText edtEmail;\r\n    TextInputLayout tilMatKhau;\r\n    TextInputEditText edtMatKhau;\r\n    Button btnDangNhap;\r\n    TextView txtQuenMatKhau, txtDangKy, tvEmail, tvMatKhau;\r\n    SharedPreferences sharedPreferences;\r\n    SharedPreferences.Editor editor;\r\n    String emailsv;\r\n    BroadcastReceiver broadcastReceiver = new MyReceiver();\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n        setContentView(R.layout.activity_login);\r\n        IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\r\n        filter.addAction(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION);\r\n        filter.addAction(WifiManager.EXTRA_RESULTS_UPDATED);\r\n        this.registerReceiver(broadcastReceiver, filter);\r\n\r\n\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\r\n            requestPermissions(new String[]{Manifest.permission.RECORD_AUDIO, Manifest.permission.CAMERA, Manifest.permission.ACCESS_NETWORK_STATE, Manifest.permission.READ_PHONE_STATE}, 100);\r\n        }\r\n\r\n        dbFirebase = new DBFirebase();\r\n        sharedPreferences = getSharedPreferences(\"GhiNhoDangNhap\", MODE_PRIVATE);\r\n        editor = sharedPreferences.edit();\r\n        emailsv = sharedPreferences.getString(\"tenTaiKhoan\", \"\");\r\n\r\n//        Toast.makeText(this, emailsv, Toast.LENGTH_SHORT).show();\r\n        kTraMang = kiemTraMang.CheckNetworkStatus(LoginActivity.this);\r\n//        Toast.makeText(this, \"\" + kTraMang, Toast.LENGTH_SHORT).show();\r\n\r\n        KiemTraGhiNhoDangNhap();\r\n        DangNhap();\r\n        actionOnService(Actions.STOP);\r\n        if (kTraMang != 0) {\r\n            txtDangKy = findViewById(R.id.txtDangKy);\r\n            txtDangKy.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    startActivity(new Intent(LoginActivity.this, DangKiActivity.class));\r\n                }\r\n            });\r\n            txtQuenMatKhau = findViewById(R.id.txtQuenMatKhau);\r\n            txtQuenMatKhau.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Intent intent = new Intent(LoginActivity.this, QuenMatKhauActivity.class);\r\n                    intent.putExtra(\"QMK\", true);\r\n                    startActivity(intent);\r\n                }\r\n            });\r\n        } else {\r\n//            Toast.makeText(this, \"No internet, check network and restart app\", Toast.LENGTH_LONG).show();\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(LoginActivity.this);\r\n            builder.setMessage(\"No internet, check network and restart app\");\r\n            builder.setPositiveButton(\"OK\", new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialog, int which) {\r\n\r\n                }\r\n            });\r\n            builder.show();\r\n        }\r\n\r\n    }\r\n\r\n    private void KiemTraGhiNhoDangNhap() {\r\n        String tenTaiKhoan = sharedPreferences.getString(\"tenTaiKhoan\", \"\");\r\n        if (tenTaiKhoan.length() != 0) {\r\n            urlHinhDaiDien = sharedPreferences.getString(\"urlHinhDaiDien\", \"\");\r\n            startActivity(new Intent(LoginActivity.this, MainActivity.class));\r\n            finish();\r\n        }\r\n    }\r\n\r\n    private void DangNhap() {\r\n        edtEmail = findViewById(R.id.edtEmail);\r\n        tilMatKhau = findViewById(R.id.tilMatKhau);\r\n        edtMatKhau = findViewById(R.id.edtMatKhau);\r\n        tvEmail = findViewById(R.id.tvEmail);\r\n        tvMatKhau = findViewById(R.id.tvMatKhau);\r\n        //Kiểm tra hợp lệ\r\n        final String checkEmail = \"[a-zA-Z0-9.]+@[a-z]+(\\\\.+[a-z]+){1,2}\";\r\n        final String checkMatKhau = \"[a-zA-Z0-9+]{6,300}\";\r\n        final boolean[] kiemTra = new boolean[2];\r\n        kiemTra[0] = false;\r\n        kiemTra[1] = false;\r\n        edtEmail.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                if (s.toString().matches(checkEmail)) {\r\n                    tvEmail.setText(\"\");\r\n                    tvEmail.setTextColor(getResources().getColor(R.color.colorSuccess));\r\n                    kiemTra[0] = true;\r\n                } else {\r\n                    tvEmail.setText(\"Invalid email\");\r\n                    tvEmail.setTextColor(getResources().getColor(R.color.colorDanger));\r\n                    kiemTra[0] = false;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n            }\r\n        });\r\n        edtMatKhau.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                if (s.toString().matches(checkMatKhau)) {\r\n                    tvMatKhau.setText(\"\");\r\n                    tvMatKhau.setTextColor(getResources().getColor(R.color.colorSuccess));\r\n                    kiemTra[1] = true;\r\n                } else {\r\n                    tvMatKhau.setText(\"Invalid password\");\r\n                    tvMatKhau.setTextColor(getResources().getColor(R.color.colorDanger));\r\n                    kiemTra[1] = false;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n            }\r\n        });\r\n        //\r\n        btnDangNhap = findViewById(R.id.btnDangNhap);\r\n        txtQuenMatKhau = findViewById(R.id.txtQuenMatKhau);\r\n        txtDangKy = findViewById(R.id.txtDangKy);\r\n        btnDangNhap.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if (kTraMang != 0) {\r\n                    if (kiemTra[0] && kiemTra[1]) {\r\n                        String email = edtEmail.getText().toString().trim();\r\n                        String matKhau = edtMatKhau.getText().toString().trim();\r\n                        dbFirebase.KiemTraDangNhap(email, matKhau);\r\n                        //\r\n                        final Dialog dialog = new Dialog(LoginActivity.this);\r\n                        dialog.setContentView(R.layout.dialog_loading);\r\n                        dialog.show();\r\n                        new CountDownTimer(1500, 100) {\r\n                            @Override\r\n                            public void onTick(long millisUntilFinished) {\r\n                            }\r\n\r\n                            @Override\r\n                            public void onFinish() {\r\n                                dialog.dismiss();\r\n                            }\r\n                        }.start();\r\n                        //\r\n                        new Handler().postDelayed(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                if (kiemTraDangNhap == 0) {\r\n                                    editor.putString(\"tenTaiKhoan\", email);\r\n                                    editor.putString(\"tenUser\", tenUser);\r\n                                    editor.putString(\"DiaChiUser\", DiaChiUser);\r\n                                    editor.putString(\"urlHinhDaiDien\", urlHinhDaiDien);\r\n                                    editor.commit();\r\n                                    getGiaodiendichvu().startClient(email);\r\n                                    HamTrangThai(email);\r\n                                    startActivity(new Intent(LoginActivity.this, MainActivity.class));\r\n                                    finish();\r\n                                }\r\n                                if (kiemTraDangNhap == 1) {\r\n                                    tvEmail.setText(\"Wrong email, check again\");\r\n                                    tvEmail.setTextColor(getResources().getColor(R.color.colorDanger));\r\n                                }\r\n                                if (kiemTraDangNhap == 2) {\r\n                                    tvMatKhau.setText(\"Wrong password, check again\");\r\n                                    tvMatKhau.setTextColor(getResources().getColor(R.color.colorDanger));\r\n                                }\r\n                                if (kiemTraDangNhap == -1) {\r\n                                    Toast.makeText(LoginActivity.this, \"Wrong email or password\", Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }\r\n                        }, 1300);\r\n                    } else {\r\n                        if (!kiemTra[0]) {\r\n                            tvEmail.setText(\"Invalid email\");\r\n                            tvEmail.setTextColor(getResources().getColor(R.color.colorDanger));\r\n                        }\r\n                        if (!kiemTra[1]) {\r\n                            tvMatKhau.setText(\"Invalid password\");\r\n                            tvMatKhau.setTextColor(getResources().getColor(R.color.colorDanger));\r\n                        }\r\n\r\n                    }\r\n                } else\r\n                    Toast.makeText(LoginActivity.this, \"No internet, check network and restart app\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        actionOnService(Actions.STOP);\r\n        super.onStart();\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        actionOnService(Actions.STOP);\r\n        super.onResume();\r\n    }\r\n\r\n    private void actionOnService(Actions actions) {\r\n\r\n        Intent intent = new Intent(LoginActivity.this, SinchServices.class);\r\n        intent.setAction(actions.name());\r\n        startService(intent);\r\n    }\r\n\r\n    public void HamTrangThai(String email){\r\n        DatabaseReference mDatabase = FirebaseDatabase.getInstance().getReference();\r\n        mDatabase.child(\"TrangThai\").addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                TrangThai trangThai1 = snapshot.getValue(TrangThai.class);\r\n                if (trangThai1.Email_user.equals(email)) {\r\n                    String key = snapshot.getKey();\r\n                    mDatabase.child(\"TrangThai\").child(key).child(\"TrangThai\").setValue(\"Active Now\");\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n//        actionOnService(Actions.START);\r\n        getGiaodiendichvu().startClient(emailsv);\r\n        super.onDestroy();\r\n    }\r\n\r\n}\r\n\r\n//                    AlertDialog dialog = new AlertDialog.Builder(LoginActivity.this)\r\n//                            .setMessage(\"Đang đăng nhập...\")\r\n//                            .create();\r\n//                    dialog.setOnShowListener(new DialogInterface.OnShowListener() {\r\n//                        private static final int AUTO_DISMISS_MILLIS = 1200;\r\n//                        @Override\r\n//                        public void onShow(final DialogInterface dialog) {\r\n//                            new CountDownTimer(AUTO_DISMISS_MILLIS, 100) {\r\n//                                @Override\r\n//                                public void onTick(long millisUntilFinished) {\r\n////                                    dbFirebase.KiemTraTaiKhoan(email, matKhau);\r\n//                                }\r\n//\r\n//                                @Override\r\n//                                public void onFinish() {\r\n//                                    if (kiemTraTaiKhoan == 1) {\r\n//                                        tvEmail.setText(\"01 Email chưa đúng, kiểm tra lại\");\r\n//                                        tvEmail.setTextColor(getResources().getColor(R.color.colorDanger));\r\n//                                        kiemTra[0] = false;\r\n//                                    } else if (kiemTraTaiKhoan == 2) {\r\n//                                        tvMatKhau.setText(\"01 Mật khẩu chưa đúng, kiểm tra lại\");\r\n//                                        tvMatKhau.setTextColor(getResources().getColor(R.color.colorDanger));\r\n//                                        kiemTra[1] = false;\r\n//                                    } else if (kiemTraTaiKhoan == 0) {\r\n//                                        Toast.makeText(LoginActivity.this, \"OK!\", Toast.LENGTH_SHORT).show();\r\n//                                        editor.putString(\"tenTaiKhoan\", email);\r\n//                                        editor.putString(\"tenUser\", TenUser);\r\n//                                        editor.commit();\r\n//                                        getGiaodiendichvu().startClient(email);\r\n//                                        startActivity(new Intent(LoginActivity.this, MainActivity.class));\r\n//                                        finish();\r\n//                                    }\r\n//                                }\r\n//                            }.start();\r\n//                        }\r\n//                    });\r\n//                    dialog.show();\r\n\r\n\r\n//    SharedPreferences sharedPreferences;\r\n//    SharedPreferences.Editor editor;\r\n//    boolean check = false;\r\n//    DatabaseHelper databasehelper;\r\n//        initPreferences();\r\n//        final EditText edtTen = findViewById(R.id.edtTen);\r\n//        final EditText edtMatKhau = findViewById(R.id.edtMatKhau);\r\n//        Button btnGo = findViewById(R.id.btnGo);\r\n//        TextView txtDangKi = findViewById(R.id.txtDangKi);\r\n//        txtDangKi.setOnClickListener(new View.OnClickListener() {\r\n//            @Override\r\n//            public void onClick(View view) {\r\n//                Intent intent = new Intent(LoginActivity.this, DangKiActivity.class);\r\n//                startActivity(intent);\r\n//            }\r\n//        });\r\n//    private void initPreferences() {\r\n//        sharedPreferences = getSharedPreferences(\"mylogin\", MODE_PRIVATE);\r\n//        editor = sharedPreferences.edit();\r\n//    }\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/tinnhn/taikhoan/LoginActivity.java	(revision d2021d6529c2345a3bdb802a88317b7934ab2409)
+++ app/src/main/java/com/example/tinnhn/taikhoan/LoginActivity.java	(date 1608088783010)
@@ -122,7 +122,10 @@
 
     private void KiemTraGhiNhoDangNhap() {
         String tenTaiKhoan = sharedPreferences.getString("tenTaiKhoan", "");
-        if (tenTaiKhoan.length() != 0) {
+        String tenUser = sharedPreferences.getString("tenUser", "");
+        String DiaChiUser = sharedPreferences.getString("DiaChiUser", "");
+        String urlHinhDaiDientest = sharedPreferences.getString("urlHinhDaiDien", "");
+        if (tenTaiKhoan.length() != 0 && tenUser.length() != 0 && DiaChiUser.length() != 0 && urlHinhDaiDientest.length() != 0) {
             urlHinhDaiDien = sharedPreferences.getString("urlHinhDaiDien", "");
             startActivity(new Intent(LoginActivity.this, MainActivity.class));
             finish();
@@ -279,7 +282,7 @@
         startService(intent);
     }
 
-    public void HamTrangThai(String email){
+    public void HamTrangThai(String email) {
         DatabaseReference mDatabase = FirebaseDatabase.getInstance().getReference();
         mDatabase.child("TrangThai").addChildEventListener(new ChildEventListener() {
             @Override
Index: app/src/main/java/com/example/tinnhn/GoiYKetBanAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tinnhn;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.SharedPreferences;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.BaseAdapter;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.tinnhn.taikhoan.DownloadImageTask;\r\nimport com.example.tinnhn.taikhoan.TaiKhoan;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static android.content.Context.MODE_PRIVATE;\r\nimport static com.example.tinnhn.ui.main.FriendChildFragment.arrFriends;\r\n\r\npublic class GoiYKetBanAdapter extends BaseAdapter {\r\n    private Context context;\r\n    private int layout;\r\n    private List<GoiYKetBan> goiYKetBanList;\r\n    private DatabaseReference mDatabase;\r\n    SharedPreferences sharedPreferences;\r\n    SharedPreferences.Editor editor;\r\n    String TenUser, DiaChiUser;\r\n    String idUser;\r\n    String hinhUser;\r\n    boolean check_friended = false;\r\n    String urlHinh;\r\n\r\n    public GoiYKetBanAdapter(Context context, int layout, List<GoiYKetBan> goiYKetBanList) {\r\n        this.context = context;\r\n        this.layout = layout;\r\n        this.goiYKetBanList = goiYKetBanList;\r\n    }\r\n\r\n    @Override\r\n    public int getCount() {\r\n        return goiYKetBanList.size();\r\n    }\r\n\r\n    @Override\r\n    public Object getItem(int i) {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public long getItemId(int i) {\r\n        return 0;\r\n    }\r\n\r\n    @Override\r\n    public View getView(int i, View view, ViewGroup viewGroup) {\r\n        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n        view = inflater.inflate(layout, null);\r\n        mDatabase = FirebaseDatabase.getInstance().getReference();\r\n        sharedPreferences = context.getSharedPreferences(\"GhiNhoDangNhap\", MODE_PRIVATE);\r\n        final String EmailUser = sharedPreferences.getString(\"tenTaiKhoan\", \"\");\r\n        editor = sharedPreferences.edit();\r\n\r\n        TextView tvTenGoiY = view.findViewById(R.id.tvTenGoiY);\r\n        TextView btnAddFriend_Goi_Y = view.findViewById(R.id.btnAddFriend_Goi_Y);\r\n        ImageView imgAnh_Goi_Y =view.findViewById(R.id.imgAnh_Goi_Y);\r\n        final GoiYKetBan goiYKetBan = goiYKetBanList.get(i);\r\n\r\n        final ArrayList<TaiKhoan> goiYKetBanArrayList_check = new ArrayList<>();\r\n\r\n        mDatabase.child(\"TaiKhoan\").addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                TaiKhoan taiKhoan = snapshot.getValue(TaiKhoan.class);\r\n                goiYKetBanArrayList_check.clear();\r\n                goiYKetBanArrayList_check.add(taiKhoan);\r\n\r\n                for (int i = 0; i < goiYKetBanArrayList_check.size(); i++) {\r\n                    if (goiYKetBanArrayList_check.get(i).email.equals(EmailUser)) {\r\n                        TenUser = goiYKetBanArrayList_check.get(i).tenTaiKhoan;\r\n                        DiaChiUser = goiYKetBanArrayList_check.get(i).diaChi;\r\n                        idUser = goiYKetBanArrayList_check.get(i).idTaiKhoan;\r\n                        hinhUser = goiYKetBanArrayList_check.get(i).hinhDaiDien;\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        tvTenGoiY.setText(goiYKetBan.tenTaiKhoan);\r\n        btnAddFriend_Goi_Y.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n//                Friends friends = new Friends(goiYKetBan.idTaiKhoan,goiYKetBan.tenTaiKhoan,goiYKetBan.email,goiYKetBan.diaChi,goiYKetBan.hinhDaiDien,EmailUser);\r\n//                mDatabase.child(\"LoiMoiKetBan\").push().setValue(friends);\r\n                for (int i = 0; i < arrFriends.size(); i++) {\r\n                    if (goiYKetBan.email.equals(arrFriends.get(i).email)) {\r\n                        AlertDialog.Builder builder = new AlertDialog.Builder(context);\r\n                        builder.setMessage(\"Friended\");\r\n                        builder.create().show();\r\n                        check_friended = true;\r\n                    }\r\n                }\r\n                if (!check_friended) {\r\n                    FriendsRequest friends1 = new FriendsRequest(null, idUser, TenUser, EmailUser, DiaChiUser, hinhUser, goiYKetBan.email);\r\n                    mDatabase.child(\"LoiMoiKetBan\").push().setValue(friends1);\r\n                    Toast.makeText(context, \"Send Successfully\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n\r\n        mDatabase.child(\"TaiKhoan\").addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                TaiKhoan taiKhoan = snapshot.getValue(TaiKhoan.class);\r\n                if (taiKhoan.getEmail().equals(goiYKetBan.email)) {\r\n                    urlHinh = taiKhoan.getHinhDaiDien();\r\n//                    new DownloadImageTask(imgAnh_Goi_Y).execute(urlHinh);\r\n                    Glide.with(context).asBitmap().load(urlHinh).into(imgAnh_Goi_Y);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n        return view;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/tinnhn/GoiYKetBanAdapter.java	(revision d2021d6529c2345a3bdb802a88317b7934ab2409)
+++ app/src/main/java/com/example/tinnhn/GoiYKetBanAdapter.java	(date 1608086910022)
@@ -2,6 +2,7 @@
 
 import android.app.AlertDialog;
 import android.content.Context;
+import android.content.DialogInterface;
 import android.content.SharedPreferences;
 import android.view.LayoutInflater;
 import android.view.View;
@@ -127,6 +128,12 @@
                     if (goiYKetBan.email.equals(arrFriends.get(i).email)) {
                         AlertDialog.Builder builder = new AlertDialog.Builder(context);
                         builder.setMessage("Friended");
+                        builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
+                            @Override
+                            public void onClick(DialogInterface dialog, int which) {
+
+                            }
+                        });
                         builder.create().show();
                         check_friended = true;
                     }
Index: .idea/gradle.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleMigrationSettings\" migrationVersion=\"1\" />\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"PLATFORM\" />\r\n        <option name=\"distributionType\" value=\"DEFAULT_WRAPPED\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"1.8\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n        <option name=\"resolveModulePerSourceSet\" value=\"false\" />\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/gradle.xml	(revision d2021d6529c2345a3bdb802a88317b7934ab2409)
+++ .idea/gradle.xml	(date 1608085889764)
@@ -15,6 +15,7 @@
           </set>
         </option>
         <option name="resolveModulePerSourceSet" value="false" />
+        <option name="useQualifiedModuleNames" value="true" />
       </GradleProjectSettings>
     </option>
   </component>
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_13_12_2020_19_18__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_13_12_2020_19_18__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_14_12_2020_16_10__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_14_12_2020_16_10__Default_Changelist_.xml
